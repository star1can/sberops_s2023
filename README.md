# HW1: Ingress, Egress and K8S

<img width="737" alt="Снимок экрана 2023-04-23 в 23 36 11" src="https://user-images.githubusercontent.com/45429125/233864955-bf2ec8c9-9d0e-4101-9639-3ec775c386d0.png">

# Описание

Основу данного проекта представляют два сервиса: `nginx` и `pokemon-service`:

`nginx` - выступает в роли pass_proxy и просто пропускает через себя трафик, направляя на нужные внутренние ручки

`pokemon-service` - полноценный сервис, написаный на Golang. Делает запрос за пределы кластера и возвращает список всех покемонов.

На входе в кластер стоит ingress-gateway, на выходе - egress-gateway, что позволяет полностью контролировать входящий и исходящий трафик.

# Доступные ручки
На текущий момент есть лишь одна ручка:
- `/pokemons/all` - возвращает список всех доступных покемонов

# Инструкция по запуску

## Пререквизиты 

1. Склонируйте репозиторий
2. Запустите Docker
3. При необходимости создайте minikube кластер при помощи скрипта `kube/start_minikube.sh`

## Инструкция

### Запуск
1. Перейдите в папку `kube`
2. Запустите скрипт `run.sh` и следуйте инструкциями. ВНИМАНИЕ: ПО ЗАВЕРШЕНИЮ СКРИПТА ВКЛАДКА ТЕРМИНАЛА БУДЕТ ЗАБЛОКИРОВАНА!
3. В новой вкладке терминала выполните скрипт `get_ip.sh`
4. Скопируйте IP-шник из колонки **EXTERNAL-IP** 
5. В браузере выполните запрос по адресу `<IP_FROM_PUNKT_4>/pokemons/all`

Если все сделано правильно, Вы увидите список доступных покемонов:

<img width="208" alt="Снимок экрана 2023-04-24 в 01 59 40" src="https://user-images.githubusercontent.com/45429125/233870752-f01f98b1-d752-4d3f-ab79-304bce58fdc1.png">

### Очистка
В папке `kube`:
- Для очистки рабочего пространства выполните скрипт `clear_workspace.sh`;
- Для удаление кластера minikube, созданного скриптом ранее, можно воспользоваться скриптом `delete_minikube.sh`.
